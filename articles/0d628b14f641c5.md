---
title: "Juliaè¨€èªã«ãŠã‘ã‚‹ä¸­ç½®æ¼”ç®—å­ã®æ‰±ã„"
emoji: "ğŸ¡"
type: "tech"
topics:
  - "julia"
  - "ä¸­ç½®æ¼”ç®—å­"
published: true
---

# ã¯ã˜ã‚ã«

Juliaè¨€èªã®å¤šé‡ãƒ‡ã‚£ã‚¹ãƒ‘ãƒƒãƒã‚„JITã‚³ãƒ³ãƒ‘ã‚¤ãƒ«ã€å®Ÿè¡Œé€Ÿåº¦ã«ã¤ã„ã¦ã¯å‘¨çŸ¥ã®ã¨ã“ã‚ã ã¨æ€ã„ã¾ã™ã€‚

https://twitter.com/bicycle1885/status/503513042554855424

https://twitter.com/bicycle1885/status/1293180133667303431

æœ¬è¨˜äº‹ã§æ›¸ããŸã„ã“ã¨ã¯**æ•°å­¦è¨˜å·ã¨ã®ç›¸æ€§ã®è‰¯ã•**ã€ç‰¹ã«**ä¸­ç½®æ¼”ç®—å­**ã®æ€§è³ªã§ã™ã€‚
Juliaè¨€èªã¯ç§‘å­¦æŠ€è¡“è¨ˆç®—å‘ã‘ã®è¨€èªã¨ã—ã¦é–‹ç™ºã•ã‚ŒãŸèƒŒæ™¯ãŒã‚ã‚Šã€ã¨ãã«Unicodeã‚’ä½¿ã£ãŸæ•°å­¦è¨˜æ³•ã¨ã®ç›¸æ€§ãŒè‰¯ã„ã‚ˆã†ã«è¨­è¨ˆã•ã‚Œã¦ã„ã¾ã™ã€‚

ãã®ä¾‹ï¼š

```julia
julia> Î±â‚„ = 42  # \alpha<Tab>\_4<Tab> ã§å…¥åŠ›
42

julia> 3Î±â‚„/12Ï€  # 3 * 42 / (12 * Ï€)
3.3422538049298023

julia> 8 âˆˆ [1,8,12]  # è¦ç´ ãŒå…¥ã£ã¦ã„ã‚‹ã‹ã€‚Unicodeã®ä¸­ç½®æ¼”ç®—å­(\in<Tab>)ãŒä¾¿åˆ©ï¼
true

julia> [2,4] âŠ† [1,8,12]  # éƒ¨åˆ†é›†åˆã®åˆ¤å®šã€‚Unicodeã®ä¸­ç½®æ¼”ç®—å­(\subseteq<Tab>)ãŒä¾¿åˆ©ï¼
false
```

# åˆç´šç·¨

## ä¸­ç½®æ¼”ç®—å­ã¯é€šå¸¸ã®é–¢æ•°ã®ã‚ˆã†ã«ã‚‚ä½¿ãˆã‚‹
ã¤ã¾ã‚Šã€ä¸­ç½®ã—ãªãã¦ã‚‚OKã§ã™ï¼
```julia
julia> +(1,2)  # 1 + 2 ã¨åŒã˜
3

julia> in(1,[1,2])  # 1 in [1,2] ã¨åŒã˜
true

julia> âŠ†([1,42],[1,2])  # [1,42] âŠ† [1,2] ã¨åŒã˜
false
```
ã“ã®è¾ºã‚Šã«ã¤ã„ã¦ã¯[å…¬å¼ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ](https://docs.julialang.org/en/v1.8.5/manual/functions/#Operators-Are-Functions)ã«ã‚‚è¨˜è¼‰ãŒã‚ã‚Šã¾ã™ã€‚

## ä¸­ç½®æ¼”ç®—å­ã«ä½¿ç”¨å¯èƒ½ãªè¨˜å·
Juliaã§ã¯ä¸­ç½®æ¼”ç®—å­ã«ä½¿ç”¨ã§ãã‚‹è¨˜å·ãŒæ±ºã¾ã£ã¦ã„ã¾ã™ã€‚
ä»¥ä¸‹ã®ä¾‹ã‚’è¦‹ã¦ã¿ã¾ã—ã‚‡ã†ã€‚
```julia
julia> â†’(a, b) = a - b  # \to<Tab>ã§å…¥åŠ›å¯èƒ½
â†’ (generic function with 1 method)

julia> f(a, b) = a - b  # åŒã˜å®šç¾©
f (generic function with 1 method)

julia> 4 â†’ 2  # ä¸­ç½®æ¼”ç®—å­ã¨ã—ã¦ä½¿ãˆã‚‹
2

julia> 4 f 2  # ãƒ€ãƒ¡ãƒ¼ãƒƒï¼
ERROR: syntax: extra token "f" after end of expression
```

ã§ã¯ã€ã©ã®ã‚ˆã†ãªè¨˜å·ãŒä¸­ç½®æ¼”ç®—å­ã¨ã—ã¦ä½¿ãˆã‚‹ã®ã§ã—ã‚‡ã†ã‹ï¼Ÿ

æ­£è§£ã¯ä»¥ä¸‹ã®648ç¨®é¡ã®è¨˜å·ã§ã™ï¼
```
= += -= âˆ’= *= /= //= |\\=| ^= Ã·= %= <<= >>= >>>= |\|=| &= âŠ»= â‰” â©´ â‰•
~
:= $=
=>
?
â† â†’ â†” â†š â†› â† â†  â†¢ â†£ â†¦ â†¤ â†® â‡ â‡ â‡ â‡ â‡’ â‡” â‡´ â‡¶ â‡· â‡¸ â‡¹ â‡º â‡» â‡¼ â‡½ â‡¾ â‡¿ âŸµ âŸ¶ âŸ· âŸ¹ âŸº âŸ» âŸ¼ âŸ½ âŸ¾ âŸ¿ â¤€ â¤ â¤‚ â¤ƒ â¤„ â¤… â¤† â¤‡ â¤Œ â¤ â¤ â¤ â¤ â¤‘ â¤” â¤• â¤– â¤— â¤˜ â¤ â¤ â¤Ÿ â¤  â¥„ â¥… â¥† â¥‡ â¥ˆ â¥Š â¥‹ â¥ â¥ â¥’ â¥“ â¥– â¥— â¥š â¥› â¥ â¥Ÿ â¥¢ â¥¤ â¥¦ â¥§ â¥¨ â¥© â¥ª â¥« â¥¬ â¥­ â¥° â§´ â¬± â¬° â¬² â¬³ â¬´ â¬µ â¬¶ â¬· â¬¸ â¬¹ â¬º â¬» â¬¼ â¬½ â¬¾ â¬¿ â­€ â­ â­‚ â­ƒ â­„ â­‡ â­ˆ â­‰ â­Š â­‹ â­Œ ï¿© ï¿« â‡œ â‡ â†œ â† â†© â†ª â†« â†¬ â†¼ â†½ â‡€ â‡ â‡„ â‡† â‡‡ â‡‰ â‡‹ â‡Œ â‡š â‡› â‡  â‡¢ â†· â†¶ â†º â†» --> <-- <-->
||
&&
in isa
> < >= â‰¥ <= â‰¤ == === â‰¡ != â‰  !== â‰¢ âˆˆ âˆ‰ âˆ‹ âˆŒ âŠ† âŠˆ âŠ‚ âŠ„ âŠŠ âˆ âˆŠ âˆ âˆ¥ âˆ¦ âˆ· âˆº âˆ» âˆ½ âˆ¾ â‰ â‰ƒ â‰‚ â‰„ â‰… â‰† â‰‡ â‰ˆ â‰‰ â‰Š â‰‹ â‰Œ â‰ â‰ â‰ â‰‘ â‰’ â‰“ â‰– â‰— â‰˜ â‰™ â‰š â‰› â‰œ â‰ â‰ â‰Ÿ â‰£ â‰¦ â‰§ â‰¨ â‰© â‰ª â‰« â‰¬ â‰­ â‰® â‰¯ â‰° â‰± â‰² â‰³ â‰´ â‰µ â‰¶ â‰· â‰¸ â‰¹ â‰º â‰» â‰¼ â‰½ â‰¾ â‰¿ âŠ€ âŠ âŠƒ âŠ… âŠ‡ âŠ‰ âŠ‹ âŠ âŠ âŠ‘ âŠ’ âŠœ âŠ© âŠ¬ âŠ® âŠ° âŠ± âŠ² âŠ³ âŠ´ âŠµ âŠ¶ âŠ· â‹ â‹ â‹‘ â‹• â‹– â‹— â‹˜ â‹™ â‹š â‹› â‹œ â‹ â‹ â‹Ÿ â‹  â‹¡ â‹¢ â‹£ â‹¤ â‹¥ â‹¦ â‹§ â‹¨ â‹© â‹ª â‹« â‹¬ â‹­ â‹² â‹³ â‹´ â‹µ â‹¶ â‹· â‹¸ â‹¹ â‹º â‹» â‹¼ â‹½ â‹¾ â‹¿ âŸˆ âŸ‰ âŸ’ â¦· â§€ â§ â§¡ â§£ â§¤ â§¥ â©¦ â©§ â©ª â©« â©¬ â©­ â©® â©¯ â©° â©± â©² â©³ â©µ â©¶ â©· â©¸ â©¹ â©º â©» â©¼ â©½ â©¾ â©¿ âª€ âª âª‚ âªƒ âª„ âª… âª† âª‡ âªˆ âª‰ âªŠ âª‹ âªŒ âª âª âª âª âª‘ âª’ âª“ âª” âª• âª– âª— âª˜ âª™ âªš âª› âªœ âª âª âªŸ âª  âª¡ âª¢ âª£ âª¤ âª¥ âª¦ âª§ âª¨ âª© âªª âª« âª¬ âª­ âª® âª¯ âª° âª± âª² âª³ âª´ âªµ âª¶ âª· âª¸ âª¹ âªº âª» âª¼ âª½ âª¾ âª¿ â«€ â« â«‚ â«ƒ â«„ â«… â«† â«‡ â«ˆ â«‰ â«Š â«‹ â«Œ â« â« â« â« â«‘ â«’ â«“ â«” â«• â«– â«— â«˜ â«™ â«· â«¸ â«¹ â«º âŠ¢ âŠ£ âŸ‚ â«ª â«« <: >:
<|
|>
: .. â€¦ â â‹® â‹± â‹° â‹¯
$
+ - âˆ’ Â¦ |\|| âŠ• âŠ– âŠ âŠŸ |++| âˆª âˆ¨ âŠ” Â± âˆ“ âˆ” âˆ¸ â‰ âŠ âŠ» âŠ½ â‹ â‹“ â§º â§» â¨ˆ â¨¢ â¨£ â¨¤ â¨¥ â¨¦ â¨§ â¨¨ â¨© â¨ª â¨« â¨¬ â¨­ â¨® â¨¹ â¨º â© â©‚ â©… â©Š â©Œ â© â© â©’ â©” â©– â©— â©› â© â©¡ â©¢ â©£
* / âŒ¿ Ã· % & Â· Î‡ â‹… âˆ˜ Ã— |\\| âˆ© âˆ§ âŠ— âŠ˜ âŠ™ âŠš âŠ› âŠ  âŠ¡ âŠ“ âˆ— âˆ™ âˆ¤ â…‹ â‰€ âŠ¼ â‹„ â‹† â‹‡ â‹‰ â‹Š â‹‹ â‹Œ â‹ â‹’ âŸ‘ â¦¸ â¦¼ â¦¾ â¦¿ â§¶ â§· â¨‡ â¨° â¨± â¨² â¨³ â¨´ â¨µ â¨¶ â¨· â¨¸ â¨» â¨¼ â¨½ â©€ â©ƒ â©„ â©‹ â© â© â©‘ â©“ â©• â©˜ â©š â©œ â© â©Ÿ â©  â«› âŠ â–· â¨ âŸ• âŸ– âŸ— â¨Ÿ
//
<< >> >>>
^ â†‘ â†“ â‡µ âŸ° âŸ± â¤ˆ â¤‰ â¤Š â¤‹ â¤’ â¤“ â¥‰ â¥Œ â¥ â¥ â¥‘ â¥” â¥• â¥˜ â¥™ â¥œ â¥ â¥  â¥¡ â¥£ â¥¥ â¥® â¥¯ ï¿ª ï¿¬
```
ã“ã®ä¸€è¦§ã¯[src/julia-parser.scm](https://github.com/JuliaLang/julia/blob/v1.8.5/src/julia-parser.scm)ã‹ã‚‰å–å¾—ã—ã¾ã—ãŸã€‚[^julia-parser]

[^julia-parser]: [Discordã®é–¢é€£ã‚¹ãƒ¬ãƒƒãƒ‰](https://discourse.julialang.org/t/list-of-binary-infix-operators/32282)ã‚„[å…¬å¼ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ(Customizable-binary-operators)](https://docs.julialang.org/en/v1/base/math/#Customizable-binary-operators)ã€[å…¬å¼ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ(Operator Precedence and Associativity)](https://docs.julialang.org/en/v1.8.5/manual/mathematical-operations/#Operator-Precedence-and-Associativity)ã§ã‚‚ã“ã®ãƒ•ã‚¡ã‚¤ãƒ«ã‚’å‚ç…§ã™ã‚‹ã“ã¨ãŒæ¨å¥¨ã•ã‚Œã¦ã„ã¾ã™ã€‚

ä¸ãˆã‚‰ã‚ŒãŸUnicodeæ–‡å­—ãŒä¸­ç½®æ¼”ç®—å­(2é …æ¼”ç®—å­)ã¨ã—ã¦ä½¿ãˆã‚‹ã‹ã¯`Base.isbinaryoperator`ã§èª¿ã¹ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚[^isbinaryoperator]

```julia
julia> Base.isbinaryoperator(:Ã·)
true

julia> Base.isbinaryoperator(:(==))
true

julia> Base.isbinaryoperator(:$)
true

julia> Base.isbinaryoperator(:f)
false
```

[^isbinaryoperator]: [isbinaryoperatorã®é–¢é€£PR](https://github.com/JuliaLang/julia/pull/23754)

# ä¸­ç´šç·¨

## ç‰¹æ®Šãªä¸­ç½®æ¼”ç®—å­`^`
ã¾ãšã¯æ¬¡ã®æ¼”ç®—çµæœã‚’è¦‹ã¦ã¿ã¾ã—ã‚‡ã†ã€‚
```julia
julia> ^(3, 2)  # 3ã®2ä¹—ã¯9
9

julia> ^(3, -1)  # 3ã®2ä¹—ã¯1/3
0.3333333333333333

julia> ^(3, 1-2)  # ^(3, -1)ã¨ã¯ç•°ãªã‚‹ï¼
ERROR: DomainError with -1:
Cannot raise an integer x to a negative power -1.
Make x or -1 a float by adding a zero decimal (e.g., 2.0^-1 or 2^-1.0 instead of 2^-1)or write 1/x^1, float(x)^-1, x^float(-1) or (x//1)^-1.
```
`^(3, -1)`ã¨`^(3, 1-2)`ã®å®Ÿè¡ŒçµæœãŒç•°ãªã‚‹ã®ã¯ã‹ãªã‚Šå¥‡å¦™ã§ã™ã­ã€‚
ã“ã‚Œã«ã¯ä»¥ä¸‹ã®ã‚ˆã†ãªèƒŒæ™¯ãŒã‚ã‚Šã¾ã™ã€‚

* `^(3, 2)` ($3^2$) ã¯æ•´æ•°`9`ã«ãªã£ã¦æ¬²ã—ã„
* é–¢æ•°`^`ã¯å‹å®‰å®š[^type-stability]ãªæ–¹ãŒå¥½ã¾ã—ãã€æ•´æ•°ãŒå¼•æ•°ã§ã‚ã‚‹é™ã‚Šã¯æ•´æ•°ã‚’è¿”ã™ã¹ãã€‚
  * ãã®ç†ç”±ã§`^(3, -1)`ã¯é€šå¸¸ã¯ã‚¨ãƒ©ãƒ¼ã®ã¯ãšã€‚
* ã—ã‹ã—ã€å‹å®‰å®šã®ãŸã‚ã ã‘ã«`^(3.0, -1)`ã¨æ›¸ãç›´ã™ã®ã¯é¢å€’ã€‚
  * ã‚³ãƒ¼ãƒ‰ã‚’parseã—ãŸéš›ã«ã€`^`ã®ç¬¬2å¼•æ•°ãŒè² ã®æ•´æ•°ã®å ´åˆã¯ç‰¹åˆ¥æ‰±ã„ã—ã‚ˆã†ï¼

[^type-stability]: å…¥åŠ›ã®å‹ãŒåŒä¸€ã§ã‚ã‚Œã°å‡ºåŠ›ã®å‹ã‚‚åŒä¸€ã§ã‚ã‚‹ã“ã¨ã€‚ä¾‹ãˆã°ã€`f(x) = if x > 0 1 else 0.0 end`ã®ã‚ˆã†ãªé–¢æ•°ã¯å¼•æ•°å‹ãŒåŒä¸€ã ã£ãŸã¨ã—ã¦ã‚‚ã«`1::Int`ã‚„`0.0::Float64`ãŒè¿”ã£ã¦ãã‚‹ã®ã§å‹å®‰å®šã§ã¯ã‚ã‚Šã¾ã›ã‚“ã€‚Juliaã«ãŠã„ã¦ã¯å‹å®‰å®šãªã‚³ãƒ¼ãƒ‰ã‚’æ›¸ãã“ã¨ãŒé«˜é€ŸåŒ–ã«ãŠã„ã¦éå¸¸ã«é‡è¦ã§ã™ã€‚

ã‚ˆã‚Šè©³ç´°ã«ã¯ã€`^`ã®ç¬¬2å¼•æ•°ãŒ(æ–‡å­—åˆ—ã¨ã—ã¦)æ•´æ•°ã®å ´åˆã«`^(a,b)`ãŒ`literal_pow(^,a,Val(b))`ã¨ã—ã¦å‡¦ç†ã•ã‚Œã‚‹ã‚ˆã†ã«ãªã£ã¦ã„ã¾ã™ã€‚[^literal_pow]

[^literal_pow]: `literal_pow`ã®ç¬¬1å¼•æ•°ã«`^`ãŒå…¥ã£ã¦ã„ã‚‹ã®ã¯å°‘ã—ä¸æ€è­°ã§ã™ã­ã€‚[syntaxã®å®šç¾©](https://github.com/JuliaLang/julia/blob/v1.8.5/src/julia-syntax.scm#L1843)ã§ã¯`^`ä»¥å¤–ã®ä¸­ç½®æ¼”ç®—å­ã§ã¯`literal_pow`ã‚’å‘¼ã°ãªã„ã‚ˆã†ã«ãªã£ã¦ã„ã¾ã™ãŒã€å°†æ¥çš„ã«åˆ¥ã®ä¸­ç½®æ¼”ç®—å­ã‚’`literal_pow`ã§ã‚µãƒãƒ¼ãƒˆã™ã‚‹ã“ã¨ã‚‚ã‚ã‚‹ã‹ã‚‚çŸ¥ã‚Œã¾ã›ã‚“ã€‚

ã“ã®`literal_pow`ã¯ã€ç‹¬è‡ªã®æ•°å€¤å‹ã«å¯¾ã—ã¦2ä¹—ã‚’å®šç¾©ã™ã‚‹å ´é¢ã«ç‰¹ã«å½¹ç«‹ã¡ã¾ã™ã€‚

```julia
julia> Base.@irrational sqrt2 1.4142135623730950488 sqrt(big(2))  # ç„¡ç†æ•°âˆš2ã®å®šç¾©

julia> sqrt2  # ã“ã®ç„¡ç†æ•°ã®å‹ã¯Irrational{:sqrt2}
sqrt2 = 1.4142135623730...

julia> sqrt2^2  # æ•°å€¤èª¤å·®ãŒç™ºç”Ÿ
2.0000000000000004

julia> Base.literal_pow(::typeof(^),::Irrational{:sqrt2},::Val{2}) = 2

julia> sqrt2^2  # literal_powã«ã‚ˆã£ã¦å‹å®‰å®šãª2ä¹—ãŒå®Ÿç¾ã§ãã‚‹
2
```

ã“ã®æ–¹æ³•ã‚’ä½¿ã£ãŸãƒ¡ã‚½ãƒƒãƒ‰ã‚’å®šç¾©ã™ã‚‹ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã¨ã—ã¦[IrrationalConstantsRules.jl](https://github.com/hyrodium/IrrationalConstantRules.jl)ã‚‚ã‚ã‚Šã¾ã™ã€‚(å®£ä¼)[^irrationalconstatns]

[^irrationalconstatns]: ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸é–‹ç™ºã®çµŒç·¯ã«ã¤ã„ã¦ã¯[IrrationalConstatns.jl#14](https://github.com/JuliaMath/IrrationalConstants.jl/pull/14)ã‚‚å‚ç…§ã—ã¦ä¸‹ã•ã„ã€‚

## ä¸­ç½®æ¼”ç®—å­ã®ãƒ¡ã‚½ãƒƒãƒ‰ã‚’è‡ªåˆ†ã§å®šç¾©ã™ã‚‹
å®Ÿç”¨çš„ãªä¾‹ã§ã¯ãªã„ã§ã™ãŒã€ä»¥ä¸‹ã®ã‚ˆã†ã«ã—ã¦ä¸­ç½®æ¼”ç®—å­ã«ãƒ¡ã‚½ãƒƒãƒ‰ã‚’å®šç¾©ã§ãã¾ã™ã€‚
```julia
julia> a Â± b = (a+b, a-b)  # å·¦è¾ºãŒä¸­ç½®æ¼”ç®—å­ã®å½¢ã§ã‚‚OK
Â± (generic function with 1 method)

julia> 1 Â± 5  # å®Ÿè¡Œä¾‹â‘ 
(6, -4)

julia> a::Int Â± b::Int = (a+b, a-b, "Int")  # å‹ã®æŒ‡å®šãŒã‚ã£ã¦ã‚‚OK
Â± (generic function with 2 methods)

julia> Â±(a::Float64, b::Float64) = (a+b, a-b, "Float64")  # æ™®é€šã®é–¢æ•°ã¨åŒã˜æ›¸ãæ–¹ã®æ–¹ãŒå¯èª­æ€§ã¯é«˜ã„
Â± (generic function with 3 methods)

julia> 1 Â± 5, 1. Â± 5.  # å®Ÿè¡Œä¾‹â‘¡
((6, -4, "Int"), (6.0, -4.0, "Float64"))

julia> methods(Â±)  # ãƒ¡ã‚½ãƒƒãƒ‰ã®ä¸€è¦§ã®å–å¾—
# 3 methods for generic function "Â±":
[1] Â±(a::Int64, b::Int64) in Main at REPL[3]:1
[2] Â±(a::Float64, b::Float64) in Main at REPL[4]:1
[3] Â±(a, b) in Main at REPL[1]:1
```

ä¸Šè¨˜ã§å·¦è¾ºãŒ`a Â± b`ã®å½¢ã§ã‚‚è‰¯ã„ã¨æ›¸ãã¾ã—ãŸãŒã€ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«åã¾ã§å…¥ã¦`a Base.:+ b`ã®ã‚ˆã†ãªå·¦è¾ºã«ã™ã‚‹ã¨ã‚¨ãƒ©ãƒ¼ã§ã™ã€‚

```julia
julia> struct Point2
           x::Float64
           y::Float64
       end

julia> a::Point2 Base.:+ b::Point2 = Point2(a.x+b.x, a.y+b.y)  # Base.:+ã®ã‚ˆã†ã«æ›¸ãã¨ä¸­ç½®æ¼”ç®—å­ã¨ã—ã¦ä½¿ãˆãªã„
ERROR: syntax: extra token "Base" after end of expression

julia> Base.:+(a::Point2, b::Point2) = Point2(a.x+b.x, a.y+b.y)  # å·¦è¾ºãŒé€šå¸¸ã®é–¢æ•°ã®å½¢ã§ã‚ã‚Œã°OK

julia> Point2(1.0, 2.0) + Point2(8.0, -5.0)
Point2(9.0, -3.0)
```

å·¦è¾ºã«ä¸­ç½®æ¼”ç®—å­ã‚’å«ã‚€ã¨å¯èª­æ€§ãŒæ‚ªã„ã®ã§ã€ç´ ç›´ã«`*(a, b) = ...`ã‹`function *(a, b) ... end`ã®å½¢ã§ãƒ¡ã‚½ãƒƒãƒ‰ã‚’å®šç¾©ã—ã¾ã—ã‚‡ã†ã€‚

# ä¸Šç´šç·¨

## è¤‡æ•°ã®ä¸­ç½®æ¼”ç®—å­
ã‹ãªã‚Šãƒˆãƒªãƒƒã‚­ãƒ¼ãªä¾‹ã§ã™ãŒã€ã“ã‚“ãªã“ã¨ã‚‚å¯èƒ½ã§ã™ã€‚
```julia
julia> Base.:+(a::Point2, b::Point2, c::Point2) = 42

julia> Point2(1,2) + Point2(3,4) + Point2(5,6)  # A+B+C ã®å½¢ã¨ãã«ã®ã¿å‘¼ã°ã‚Œã‚‹ãƒ¡ã‚½ãƒƒãƒ‰
42

julia> (Point2(1,2) + Point2(3,4)) + Point2(5,6)
Point2(9.0, 12.0)

julia> Point2(1,2) + (Point2(3,4) + Point2(5,6))
Point2(9.0, 12.0)
```
ã“ã®`Point2`ã®ä¾‹ã¯æ¥µç«¯ã§å®Ÿç”¨æ€§ãŒè¦‹ãˆã«ãã„ã§ã™ãŒã€è¡Œåˆ—ã®ç©ã ã¨æœ‰ã‚Šé›£ã•ãŒè¦‹ãˆã‚„ã™ã„ã§ã™ã€‚

è¡Œåˆ—ã®æ›ã‘ç®—$ABC$ã«ãŠã„ã¦ã¯ã€æ•°å­¦çš„ã«ã¯åŒã˜å€¤ã§ã‚‚$(AB)C$ã¨$A(BC)$ã§è¨ˆç®—é€Ÿåº¦ãŒå¤§ããé•ã†ã“ã¨ãŒã‚ã‚Šã¾ã™ã€‚

$A(BC)$ã®æ–¹ãŒé€Ÿã„ã‚±ãƒ¼ã‚¹
:::details å®Ÿè¡Œä¾‹
```julia
julia> A, B, C = rand(10,200), rand(200,10000), rand(10000,2);

julia> @benchmark ($A*$B)*$C  # ABã‚’å…ˆã«è¨ˆç®—ã™ã‚‹æ–¹ãŒé…ã„
BenchmarkTools.Trial: 1289 samples with 1 evaluation.
 Range (min â€¦ max):  3.020 ms â€¦   5.842 ms  â”Š GC (min â€¦ max): 0.00% â€¦ 0.00%
 Time  (median):     3.773 ms               â”Š GC (median):    0.00%
 Time  (mean Â± Ïƒ):   3.855 ms Â± 473.692 Î¼s  â”Š GC (mean Â± Ïƒ):  0.25% Â± 1.66%

            â–‡â–ˆâ–…â–ƒâ–†  â–‚â–    â– â–â–â–                                 
  â–ƒâ–„â–…â–ƒâ–ƒâ–‚â–„â–ƒâ–‡â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–‡â–ˆâ–ˆâ–ˆâ–†â–ˆâ–‡â–‡â–ˆâ–†â–ˆâ–ˆâ–ˆâ–†â–†â–‡â–…â–ˆâ–…â–„â–†â–„â–„â–‚â–„â–ƒâ–ƒâ–ƒâ–ƒâ–‚â–‚â–‚â–â–‚â–‚â–‚â–‚â–â–‚â–‚â–‚â–‚â–â– â–ƒ
  3.02 ms         Histogram: frequency by time        5.29 ms <

 Memory estimate: 781.52 KiB, allocs estimate: 3.

julia> @benchmark $A*($B*$C)  # BCã‚’å…ˆã«è¨ˆç®—ã™ã‚‹æ–¹ãŒé€Ÿã„
BenchmarkTools.Trial: 4686 samples with 1 evaluation.
 Range (min â€¦ max):  826.362 Î¼s â€¦   1.840 ms  â”Š GC (min â€¦ max): 0.00% â€¦ 0.00%
 Time  (median):       1.044 ms               â”Š GC (median):    0.00%
 Time  (mean Â± Ïƒ):     1.048 ms Â± 132.109 Î¼s  â”Š GC (mean Â± Ïƒ):  0.00% Â± 0.00%

     â–‚â–†â–‡â–„â–ƒ       â–â–â–„â–„â–…â–†â–ƒâ–…â–ˆâ–…â–…â–„â–…â–„â–ƒâ–                                
  â–‚â–ƒâ–‡â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–†â–ˆâ–‡â–‡â–†â–‡â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–†â–‡â–…â–…â–…â–…â–…â–…â–…â–„â–ƒâ–ƒâ–ƒâ–„â–‚â–‚â–ƒâ–ƒâ–‚â–‚â–‚â–‚â–‚â–‚â–‚â–â–‚â–‚ â–…
  826 Î¼s           Histogram: frequency by time         1.42 ms <

 Memory estimate: 3.47 KiB, allocs estimate: 2.

julia> @benchmark $A*$B*$C  # ã„ã¡ã°ã‚“ã¯ã‚„ã„
BenchmarkTools.Trial: 4740 samples with 1 evaluation.
 Range (min â€¦ max):  825.050 Î¼s â€¦   1.664 ms  â”Š GC (min â€¦ max): 0.00% â€¦ 0.00%
 Time  (median):       1.030 ms               â”Š GC (median):    0.00%
 Time  (mean Â± Ïƒ):     1.037 ms Â± 130.141 Î¼s  â”Š GC (mean Â± Ïƒ):  0.00% Â± 0.00%

     â–ƒâ–…â–ˆâ–†â–ƒâ–‚â–ƒâ–‚  â–â–‚   â–ƒâ–â–ƒâ–‚â–ƒâ–ƒâ–†â–†â–„â–‚â– â–‚â– â–                             
  â–‚â–„â–†â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–‡â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–‡â–‡â–†â–‡â–†â–…â–…â–…â–…â–…â–„â–ƒâ–ƒâ–„â–ƒâ–ƒâ–ƒâ–ƒâ–‚â–‚â–‚â–‚â–‚â–â–‚â– â–…
  825 Î¼s           Histogram: frequency by time         1.38 ms <

 Memory estimate: 3.47 KiB, allocs estimate: 2.
```
:::

$(AB)C$ã®æ–¹ãŒé€Ÿã„ã‚±ãƒ¼ã‚¹[^matrix-multiply]
:::details å®Ÿè¡Œä¾‹
```julia
julia> A, B, C = rand(2,10000), rand(10000,200), rand(200,10);

julia> @benchmark ($A*$B)*$C  # ABã‚’å…ˆã«è¨ˆç®—ã™ã‚‹æ–¹ãŒé€Ÿã„
BenchmarkTools.Trial: 10000 samples with 1 evaluation.
 Range (min â€¦ max):  251.907 Î¼s â€¦  1.951 ms  â”Š GC (min â€¦ max): 0.00% â€¦ 0.00%
 Time  (median):     336.351 Î¼s              â”Š GC (median):    0.00%
 Time  (mean Â± Ïƒ):   372.046 Î¼s Â± 84.211 Î¼s  â”Š GC (mean Â± Ïƒ):  0.00% Â± 0.00%

         â–ˆâ–‡â–‚                                                    
  â–‚â–â–â–â–â–‚â–ˆâ–ˆâ–ˆâ–ˆâ–†â–…â–„â–„â–ƒâ–‚â–ƒâ–‚â–‚â–‚â–‚â–‚â–‚â–ƒâ–…â–‡â–†â–†â–„â–ƒâ–ƒâ–‚â–‚â–‚â–‚â–‚â–â–‚â–‚â–â–â–â–â–â–â–â–â–â–â–â–â–â–â–â–â–â–â–â–â– â–‚
  252 Î¼s          Histogram: frequency by time          643 Î¼s <

 Memory estimate: 3.47 KiB, allocs estimate: 2.

julia> @benchmark $A*($B*$C)  # BCã‚’å…ˆã«è¨ˆç®—ã™ã‚‹æ–¹ãŒé…ã„
BenchmarkTools.Trial: 3818 samples with 1 evaluation.
 Range (min â€¦ max):  1.088 ms â€¦   2.539 ms  â”Š GC (min â€¦ max): 0.00% â€¦ 22.21%
 Time  (median):     1.231 ms               â”Š GC (median):    0.00%
 Time  (mean Â± Ïƒ):   1.290 ms Â± 182.392 Î¼s  â”Š GC (mean Â± Ïƒ):  0.71% Â±  3.72%

     â–ƒâ–‡â–†â–ˆâ–ˆâ–ˆâ–…â–…â–‚â–„â–â–                                              
  â–ƒâ–…â–‡â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–‡â–†â–„â–ƒâ–„â–ƒâ–ƒâ–ƒâ–ƒâ–ƒâ–ƒâ–ƒâ–‚â–‚â–ƒâ–‚â–‚â–‚â–‚â–‚â–‚â–‚â–‚â–‚â–â–‚â–‚â–‚â–â–‚â–â–‚â–‚â–‚â–‚â–‚â–‚â–‚â–â–‚â–‚â–â–‚â– â–ƒ
  1.09 ms         Histogram: frequency by time        1.92 ms <

 Memory estimate: 781.52 KiB, allocs estimate: 3.

julia> @benchmark $A*$B*$C  # ã„ã¡ã°ã‚“ã¯ã‚„ã„
BenchmarkTools.Trial: 10000 samples with 1 evaluation.
 Range (min â€¦ max):  252.668 Î¼s â€¦  1.243 ms  â”Š GC (min â€¦ max): 0.00% â€¦ 0.00%
 Time  (median):     316.449 Î¼s              â”Š GC (median):    0.00%
 Time  (mean Â± Ïƒ):   339.035 Î¼s Â± 63.503 Î¼s  â”Š GC (mean Â± Ïƒ):  0.00% Â± 0.00%

         â–ƒâ–ˆâ–ˆâ–ƒâ–                                                  
  â–â–â–â–â–â–‚â–†â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–‡â–†â–…â–„â–„â–„â–ƒâ–ƒâ–ƒâ–ƒâ–‚â–‚â–‚â–‚â–‚â–‚â–‚â–‚â–â–â–â–â–â–â–â–â–â–â–â–â–â–â–â–â–â–â–â–â–â–â–â–â–â–â–â–â–â– â–‚
  253 Î¼s          Histogram: frequency by time          600 Î¼s <

 Memory estimate: 3.47 KiB, allocs estimate: 2.
```
:::

[^matrix-multiply]: 2ã¤ã®å®Ÿè¡Œä¾‹ã§ã¯åŒã˜ã‚µã‚¤ã‚ºã®è¡Œåˆ—ã‚’ä½¿ã£ã¦ã„ã¾ã™ãŒã€å®Ÿè¡Œé€Ÿåº¦ãŒå¤§ããå¤‰ã‚ã£ã¦ã„ã¾ã™(825.050 Î¼s vs 252.668 Î¼s)ã€‚ã“ã®ç†ç”±ã¯ç­†è€…ã¯ã¾ã ã‚ˆãçŸ¥ã‚Šã¾ã›ã‚“ã€‚

ã¨ã“ã‚ã§ã€ã“ã®ã‚ˆã†ãªå®šç¾©ã¯`+`ã‚„`*`ç­‰ã®ã¿ã«ä½¿ãˆã‚‹ã‚‚ã®ã§ã€ä»–ã®æ¼”ç®—å­`âŠ•`ã‚„`âŠ—`ã«ã¯ä½¿ãˆã¾ã›ã‚“ã€‚

```julia
julia> struct Foo end

julia> Foo()
Foo()

julia> Base.:*(a::Foo, b::Foo, c::Foo) = "foo"

julia> âŠ—(a::Foo, b::Foo, c::Foo) = "foo"
âŠ— (generic function with 2 methods)

julia> Foo() * Foo() * Foo()
"foo"

julia> Foo() âŠ— Foo() âŠ— Foo()  # å®šç¾©ã—ãŸãƒ¡ã‚½ãƒƒãƒ‰ã¯å‘¼ã°ã‚Œãªã„
ERROR: MethodError: no method matching âŠ—(::Foo, ::Foo)
```

ã“ã‚Œã«ã¤ã„ã¦ã¯[å…¬å¼ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ](https://docs.julialang.org/en/v1.8.5/manual/mathematical-operations/#footnote-2)ã«è¨˜è¼‰ã•ã‚Œã¦ã„ã¾ã™ã€‚

>The operators `+`, `++` and `*` are non-associative. `a + b + c` is parsed as `+(a, b, c)` not `+(+(a, b), c)`. However, the fallback methods for `+(a, b, c, d...)` and `*(a, b, c, d...)` both default to left-associative evaluation.

## ä¸­ç½®æ¼”ç®—å­ã‚’è‡ªåˆ†ã§ã‚‚ã£ã¨å®šç¾©ã™ã‚‹
*ä¸­ç½®æ¼”ç®—å­ã¯648å€‹ã—ã‹ç„¡ã„ã¨è¨€ã£ãŸãªã€ã‚ã‚Œã¯å˜˜ã ã€‚*

Juliaã§ã¯ä¸­ç½®æ¼”ç®—å­ã«suffixã‚’ã¤ã‘ãŸã‚‚ã®ã‚‚ã¾ãŸä¸­ç½®æ¼”ç®—å­ã¨ã—ã¦ä½¿ç”¨å¯èƒ½ã§ã™ï¼
```julia
julia> +â€²(a, b) = a+b+1  # â€²ã¯prime<Tab>ã§å…¥åŠ›å¯èƒ½
+â€² (generic function with 1 method)

julia> 8 +â€² 9
18

julia> +_1(a,b) = 3  # ä½¿ãˆãªã„suffixã‚‚ã‚ã‚‹
ERROR: syntax: "_1(a, b)" is not a valid function argument name around REPL[1]:1

julia> Base.isbinaryoperator(:(+â€²))  # isbinaryoperatorã§ç¢ºèªã—ã¦ã‚‚true
true
```

suffixã«ä½¿ãˆã‚‹æ–‡å­—ã®ä¸€è¦§ã¯
```
â‚€â‚â‚‚â‚ƒâ‚„â‚…â‚†â‚‡â‚ˆâ‚‰â‚Šâ‚‹â‚Œâ‚â‚Â²Â³Â¹Ê°Ê²Ê³Ê·Ê¸Ë¡Ë¢Ë£á´¬á´®á´°á´±á´³á´´á´µá´¶á´·á´¸á´¹á´ºá´¼á´¾á´¿áµ€áµáµ‚áµƒáµ‡áµˆáµ‰áµáµáµáµ’áµ–áµ—áµ˜áµ›áµáµáµŸáµ áµ¡áµ¢áµ£áµ¤áµ¥áµ¦áµ§áµ¨áµ©áµªá¶œá¶ á¶¥á¶¦á¶«á¶°á¶¸á¶»á¶¿â°â±â´âµâ¶â·â¸â¹âºâ»â¼â½â¾â¿â‚â‚‘â‚’â‚“â‚•â‚–â‚—â‚˜â‚™â‚šâ‚›â‚œâ±¼â±½" * "â€²â€³â€´â€µâ€¶â€·â—
```
ã§ã™ï¼[julia_opsuffs.h](https://github.com/JuliaLang/julia/blob/master/src/flisp/julia_opsuffs.h)ã‚’å‚ç…§ã—ã¦ãã ã•ã„ã€‚[^suffix]

suffixã¯è¤‡æ•°å€‹é‡ã­ã‚‹ã“ã¨ãŒå¯èƒ½ã§ã€Unicodeã®æ–‡å­—è£…é£¾ã¨é‡ã­ã‚‹ã“ã¨ã‚‚å¯èƒ½ã§ã™ã€‚

[^suffix]: ã“ã®æ–‡æ³•ã¯[julia#22089](https://github.com/JuliaLang/julia/pull/22089)ã®PRã§ä½œæˆã•ã‚ŒãŸã‚‚ã®ã§ã™ã€‚

```julia
julia> +Â¹Â²Â³(a,b) = -(a+b)  # +\^123<tab>ã§å…¥åŠ›
+Â¹Â²Â³ (generic function with 1 method)

julia> 8 +Â¹Â²Â³ 2
-10

julia> +Ì‡(a,b) = 2(a+b)  # +\dot<tab>ã§å…¥åŠ›
+Ì‡ (generic function with 1 method)

julia> 1 +Ì‡ 3
8
```

## ä¸­ç½®æ¼”ç®—å­ã®åˆ†é¡
ä¸­ç½®æ¼”ç®—å­ã¯æ˜ç¢ºã«æ–‡æ³•ä¸Šã®å½¹å‰²ãŒåˆ†é¡ã•ã‚Œã¾ã™ã€‚
ä¾‹ãˆã°

* `a == b < c`ã¯`(a == b) & (b < c)`ã¨åŒã˜æ„å‘³
* `a + b * c`ã¯`a + (b * c)`ã¨åŒã˜æ„å‘³

ã¯å……ãŸã—ã¦æ¬²ã—ã„ã§ã™ã‚ˆã­ã€‚ã¤ã¾ã‚Šã€ä¸­ç½®æ¼”ç®—å­ã«ã¯è¨˜å·è‡ªä½“ã«æ„å‘³ãŒè¾¼ã‚ã‚‰ã‚Œã¦ã„ã¾ã™ã€‚
`==`ã¨é¡ä¼¼ã®ã‚‚ã®ã€ã¤ã¾ã‚Š`Bool`ã‚’è¿”ã™ã¹ãä¸­ç½®æ¼”ç®—å­ã«ã¯

```
in isa > < >= â‰¥ <= â‰¤ == === â‰¡ != â‰  !== â‰¢ âˆˆ âˆ‰ âˆ‹ âˆŒ âŠ† âŠˆ âŠ‚ âŠ„ âŠŠ âˆ âˆŠ âˆ âˆ¥ âˆ¦ âˆ· âˆº âˆ» âˆ½ âˆ¾ â‰ â‰ƒ â‰‚ â‰„ â‰… â‰† â‰‡ â‰ˆ â‰‰ â‰Š â‰‹ â‰Œ â‰ â‰ â‰ â‰‘ â‰’ â‰“ â‰– â‰— â‰˜ â‰™ â‰š â‰› â‰œ â‰ â‰ â‰Ÿ â‰£ â‰¦ â‰§ â‰¨ â‰© â‰ª â‰« â‰¬ â‰­ â‰® â‰¯ â‰° â‰± â‰² â‰³ â‰´ â‰µ â‰¶ â‰· â‰¸ â‰¹ â‰º â‰» â‰¼ â‰½ â‰¾ â‰¿ âŠ€ âŠ âŠƒ âŠ… âŠ‡ âŠ‰ âŠ‹ âŠ âŠ âŠ‘ âŠ’ âŠœ âŠ© âŠ¬ âŠ® âŠ° âŠ± âŠ² âŠ³ âŠ´ âŠµ âŠ¶ âŠ· â‹ â‹ â‹‘ â‹• â‹– â‹— â‹˜ â‹™ â‹š â‹› â‹œ â‹ â‹ â‹Ÿ â‹  â‹¡ â‹¢ â‹£ â‹¤ â‹¥ â‹¦ â‹§ â‹¨ â‹© â‹ª â‹« â‹¬ â‹­ â‹² â‹³ â‹´ â‹µ â‹¶ â‹· â‹¸ â‹¹ â‹º â‹» â‹¼ â‹½ â‹¾ â‹¿ âŸˆ âŸ‰ âŸ’ â¦· â§€ â§ â§¡ â§£ â§¤ â§¥ â©¦ â©§ â©ª â©« â©¬ â©­ â©® â©¯ â©° â©± â©² â©³ â©µ â©¶ â©· â©¸ â©¹ â©º â©» â©¼ â©½ â©¾ â©¿ âª€ âª âª‚ âªƒ âª„ âª… âª† âª‡ âªˆ âª‰ âªŠ âª‹ âªŒ âª âª âª âª âª‘ âª’ âª“ âª” âª• âª– âª— âª˜ âª™ âªš âª› âªœ âª âª âªŸ âª  âª¡ âª¢ âª£ âª¤ âª¥ âª¦ âª§ âª¨ âª© âªª âª« âª¬ âª­ âª® âª¯ âª° âª± âª² âª³ âª´ âªµ âª¶ âª· âª¸ âª¹ âªº âª» âª¼ âª½ âª¾ âª¿ â«€ â« â«‚ â«ƒ â«„ â«… â«† â«‡ â«ˆ â«‰ â«Š â«‹ â«Œ â« â« â« â« â«‘ â«’ â«“ â«” â«• â«– â«— â«˜ â«™ â«· â«¸ â«¹ â«º âŠ¢ âŠ£ âŸ‚ â«ª â«« <: >:
```

ãŒã‚ã‚Šã¾ã™ã€‚
ã“ã‚Œã¯[`julia-parser.scm`](https://github.com/JuliaLang/julia/blob/v1.8.5/src/julia-parser.scm#L16-L18)ã§`prec-comparison`ã¨ã—ã¦å®šç¾©ã•ã‚Œã¦ãŠã‚Šã€åŒæ§˜ã«ã€`+`ã®é¡ä¼¼ç‰©ã¯`prec-plus`ã¨ã—ã¦åŒãƒ•ã‚¡ã‚¤ãƒ«ã§å®šç¾©ã•ã‚Œã¦ã„ã¾ã™ã€‚

`false == 4 isa Bool`ã®æŒ™å‹•ã‚’åˆã‚ã¦è¦‹ãŸã¨ãã€ç§ã¯å°‘ã—æ··ä¹±ã—ã¾ã—ãŸãŒ`prec-comparison`ã«å±ã™ã‚‹ã‚‚ã®ã¯åŒæ§˜ã«parseã•ã‚Œã‚‹ã¨æ€ãˆã°è‡ªç„¶ã ã¨æ€ãˆã‚‹ã†ã‚ˆã†ã«ãªã‚Šã¾ã—ãŸã€‚

```julia
julia> (false == 4) isa Bool  # ã“ã‚Œã‚‚
true

julia> false == (4 isa Bool)  # ã“ã‚Œã‚‚trueã ãŒ
true

julia> false == 4 isa Bool  # ã“ã£ã¡ã¯falseã€‚
false

julia> (false == 4) && (4 isa Bool)  # ã“ã®ã‚ˆã†ã«è€ƒãˆã‚Œã°OK
false
```

## ä¸­ç½®æ¼”ç®—å­ã®å„ªå…ˆé †ä½
Juliaã§ã¯`a = b = 4`ã®ã‚ˆã†ã«å¤‰æ•°ã‚’å®šç¾©ã§ãã¾ã™ãŒã€ã“ã®å®šç¾©ã«ãŠã„ã¦ã¯å³å´ã®çµåˆãŒå„ªå…ˆã•ã‚Œå®Ÿã¯`a = (b = 4)`ã¨æ›¸ã„ã¦ã‚‚OKã§ã™ã€‚[^wolfram-set]
ä¸€æ–¹ã§ã€`a - b - 4`ã¯`a - (b - 4)`ã§ã¯ãªã`(a - b) - 4`ã«ç­‰ã—ã„ã§ã™ã€‚
ã“ã‚Œã®çµåˆã®å¼·ã•ã¯`Base.operator_associativity`ã§èª¿ã¹ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚

[^wolfram-set]: å®Œå…¨ã«ä½™è«‡ã§ã™ãŒã€[Wolframè¨€èªã®`Set`](https://reference.wolfram.com/language/ref/Set.html)ã‚‚åŒã˜ã‚ˆã†ãªå‹•ä½œã§ã™ã€‚Pythonã§ã¯`a = (b = 4)`ã¯ã‚¨ãƒ©ãƒ¼ã«ãªã‚Šã¾ã™ã€‚

```julia
julia> a = b = 4
4

julia> a = (b = 4)
4

julia> a - b - 4
-4

julia> a - (b - 4)
4

julia> (a - b) - 4
-4

julia> Base.operator_associativity(:(=))
:right

julia> Base.operator_associativity(:(-))
:left
```

ã¨ã“ã‚ã§ã€çµåˆã®å„ªå…ˆé †ä½ã¨è¨€ãˆã°ã€Œè¶³ã—ç®—`+`ã‚ˆã‚Šã‚‚æ›ã‘ç®—`*`ã®æ–¹ãŒå„ªå…ˆã€ã®ã‚ˆã†ãªæ–‡è„ˆã‚‚ã‚ã‚Šã¾ã™ã€‚[^Precedence-and-Associativity]
ã“ã¡ã‚‰ã«ã¤ã„ã¦ã¯`Base.operator_precedence`ã§èª¿ã¹ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚

[^Precedence-and-Associativity]: å…¬å¼ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã§ã¯Precedence(å„ªå…ˆé †ä½)ã¨Associativity(çµåˆæ€§)ã®ç”¨èªãŒä½¿ã‚ã‚Œã¦ã„ã¾ã™ãŒã€å®šç€ã—ãŸæ—¥æœ¬èªãŒã‚ã‚‹ã‹ã¯ç­†è€…ã¯çŸ¥ã‚Šã¾ã›ã‚“ã€‚

```julia
julia> Base.operator_precedence(:+), Base.operator_precedence(:*), Base.operator_precedence(:âŠ•)  # æœ€å¾Œã®ã¯\oplus
(11, 12, 11)
```

æ•°å­—ã®å¤§ãã„æ–¹ãŒå¼·ã„ã“ã¨ãŒåˆ†ã‹ã‚Šã¾ã™ã­ã€‚
`+`ã¨`âŠ•`ã¨ã§ã¾ã£ãŸãåŒã˜çµåˆåº¦ã§ã‚ã‚‹ã“ã¨ãŒåˆ†ã‹ã‚Šã¾ã™ã­ã€‚
ã“ã‚Œã¯ã©ã¡ã‚‰ã‚‚[`julia-parser.scm`](https://github.com/JuliaLang/julia/blob/v1.8.5/src/julia-parser.scm#L22-L23)ã§`prec-plus`ã¨ã—ã¦å®šç¾©ã•ã‚Œã¦ã„ã‚‹ãŸã‚ã§ã™ã€‚

# ã¾ã¨ã‚
* Juliaã§ã¯ä¸­ç½®æ¼”ç®—å­ã«ä½¿ãˆã‚‹è¨˜å·ãŒã‚ã‚‰ã‹ã˜ã‚æ±ºã‚ã‚‰ã‚Œã¦ã„ã‚‹ã€‚
* ä¸­ç½®æ¼”ç®—å­ã‚’è£…é£¾ã—ã¦æ–°ã—ã„ä¸­ç½®æ¼”ç®—å­ã¨ã—ã¦ä½¿ãˆã‚‹ã€‚
* ä¸­ç½®æ¼”ç®—å­ã«ã‚‚è‰²ã€…ãªç¨®é¡ãŒã‚ã‚Šã€å„ªå…ˆé †ä½ã‚„çµåˆæ€§ãŒæ±ºã‚ã‚‰ã‚Œã¦ã„ã‚‹ã€‚
* Juliaã®ã€Œãƒ¡ã‚½ãƒƒãƒ‰ã®è¿½åŠ å¯èƒ½ãªä¸­ç½®æ¼”ç®—å­ã€ã¨ã€Œå¤šé‡ãƒ‡ã‚£ã‚¹ãƒ‘ãƒƒãƒã€ã¯è¨€èªè¨­è¨ˆä¸Šç›¸æ€§ãŒè‰¯ã„ã€‚
