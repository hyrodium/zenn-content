---
title: "Documenter.jlã§ä½œã‚‹å€‹äººã‚µã‚¤ãƒˆ"
emoji: "ğŸ”–"
type: "tech"
topics:
  - "julia"
published: true
published_at: "2021-03-28 23:29"
---

# ã¤ãã£ãŸã‚‚ã®
https://twitter.com/Hyrodium/status/1345342946938298369

https://hyrodium.github.io/

# Documenter.jlã£ã¦ä½•ãŒã§ãã‚‹ã‚“ã§ã™ã‹ï¼Ÿ
Juliaã®ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã§ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã‚’ä½œæˆã™ã‚‹ãŸã‚ã®ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã§ã™ï¼
https://github.com/JuliaDocs/Documenter.jl

Juliaé–¢é€£ã®ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã¯Documenter.jlã§ä½œã‚‹ã®ãŒæ¨™æº–ã«ãªã£ã¦ã„ã¾ã™ã€‚ã„ãã¤ã‹ã®ä¾‹ï¼š

* [Juliaæœ¬ä½“ã®ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ](https://docs.julialang.org/en/v1/)
* [Plots.jlã®ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ](http://docs.juliaplots.org/latest/)
* [Documenter.jlã®ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ](https://juliadocs.github.io/Documenter.jl/stable/)
* [BasicBSpline.jlã®ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ](https://hyrodium.github.io/BasicBSpline.jl/stable/)

# Documenter.jlã£ã¦ä½•ã‚’ã‚„ã£ã¦ã‚‹ã‚“ã§ã™ã‹ï¼Ÿ
å†…éƒ¨çš„ã«ã¯ä»¥ä¸‹ã®ã“ã¨ã‚’ã‚„ã£ã¦ãã‚Œã¦ã¾ã™ã€‚
* `./docs`ä»¥ä¸‹ã‚’å‚ç…§ã—ã¦ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã‚’ç”Ÿæˆ
  * markdownã‹ã‚‰htmlã‚’ç”Ÿæˆ
  * æ•°å¼ã«ã‚‚MathJaxã‚„KaTeXã§å¯¾å¿œ
  * ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆç”Ÿæˆæ™‚ã«Juliaã®å®Ÿè¡Œã‚‚å¯èƒ½
* GitHub Pagesç­‰ã§ã®ãƒ‡ãƒ—ãƒ­ã‚¤
  * Travisã¨ã‹GitHub Actionsã§å‡ºæ¥ã¾ã™ã€‚

Documenter.jlè‡ªä½“ã®ä½¿ã„æ–¹ã¯ä»–è¨˜äº‹ãŒå‚è€ƒã«ãªã‚‹ã¨æ€ã„ã¾ã™ã€‚

* [Julia ã® Documenter.jl ã§ãƒ›ãƒ¼ãƒ ãƒšãƒ¼ã‚¸ã‚’ä½œæˆã™ã‚‹æº–å‚™ï¼](https://qiita.com/SatoshiTerasaki/items/b0ac17088f3b2c374099)
* [PkgTemplates ã«ã‚ˆã‚‹ Julia ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã®ä½œã‚Šæ–¹ï¼ˆå‰åŠï¼‰](https://qiita.com/SatoshiTerasaki/items/24443f20852ed60968bf)
* [PkgTemplates ã«ã‚ˆã‚‹ Julia ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã®ä½œã‚Šæ–¹ï¼ˆå¾ŒåŠï¼‰](https://qiita.com/SatoshiTerasaki/items/f43a7730bcf57f4b9572)

# å€‹äººã‚µã‚¤ãƒˆã«é©ç”¨ã™ã‚‹è©±
**æ³¨æ„ï¼šä»¥ä¸‹ã®æƒ…å ±ã¯å¤ã„ã§ã™ã€‚æœ€æ–°æƒ…å ±ã«ã¯è¨˜äº‹ä¸‹éƒ¨ã®è¿½è¨˜ã‚’ã”ç¢ºèªãã ã•ã„**

æœ¬é¡Œã§ã™ã€‚ã‹ã£ã“ã„ã„ã®ã§Juliaãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ä»¥å¤–ã«ã‚‚Documenter.jlã‚’ä½¿ã„ãŸããªã‚Šã¾ã™ã‚ˆã­ï¼ï¼Ÿ
ä¼¼ãŸã‚ˆã†ãªè€ƒãˆãŒ[discourceã§è­°è«–](https://discourse.julialang.org/t/using-documenter-jl-for-non-julia-package-documentation/37511/2)ã•ã‚Œã¦ã¾ã—ãŸãŒã€ã“ã¡ã‚‰ã¯Juliaä»¥å¤–ã®ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã«é–¢ã™ã‚‹è©±é¡Œã€‚å€‹äººã‚µã‚¤ãƒˆã¯å°‘ã—äº‹æƒ…ãŒç•°ãªã‚Šã¾ã™ã€‚

ã¨ã‚‚ã‹ãã‚„ã£ã¦ã„ãã¾ã—ã‚‡ã†ã€‚

å‰è¿°ã®é€šã‚Šã€Documenter.jlã¯ã€ŒJuliaãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã®ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã€ã«ç‰¹åŒ–ã—ãŸãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ãªã®ã§ã€å€‹äººã‚µã‚¤ãƒˆã«ã¯ä½¿ã„ã«ãã„éƒ¨åˆ†ãŒã‚ã‚Šã¾ã™ã€‚å…·ä½“çš„ã«ã¯`<github pages url>/dev`ã®ã‚ˆã†ã«ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã‚’æ˜ã£ã¦ã—ã¾ã†æ‰€ã§ã™ã€‚ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã§ã‚ã‚Œã°ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã”ã¨ã®ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆæ•´å‚™ã¯å¿…é ˆã§ã™ãŒã€å€‹äººã‚µã‚¤ãƒˆã«ã¯ä¸è¦ã§ã™ã‚ˆã­ã€‚

çµè«–ã‹ã‚‰è¨€ãˆã°ã€ã“ã‚Œã‚’ä¿®æ­£ã™ã‚‹ã«ã¯[`Documenter.Writers.HTMLWriter.generate_siteinfo_file`](https://github.com/JuliaDocs/Documenter.jl/blob/v0.26.3/src/Writers/HTMLWriter.jl#L1298)ã¨[`Documenter.gitrm_copy`](https://github.com/JuliaDocs/Documenter.jl/blob/v0.26.3/src/Documenter.jl#L724)ã‚’ä»¥ä¸‹ã®ã‚ˆã†ã«ä¿®æ­£ã™ã‚Œã°OKã§ã™ï¼

```julia
"""
Disable generating siteinfo.js
"""
function Documenter.Writers.HTMLWriter.generate_siteinfo_file(dir::AbstractString, version::AbstractString)
end

"""
Redefine gitrm_copy function to produce <repo>/<docs> instead of <repo>/dev/<docs>
"""
function Documenter.gitrm_copy(src, dst)
    repo_dir = splitdir(dst)[1]

    # --ignore-unmatch so that we wouldn't get errors if dst does not exist
    run(`git rm -rf --ignore-unmatch $(repo_dir)`)
    # git rm also removed parent directories
    # if they are empty so need to mkpath after
    # mkpath(dst)
    mktempdir() do backup
        cp(joinpath(repo_dir,".git"), joinpath(backup,".git"))
        cp(src, repo_dir; force=true)
        cp(joinpath(backup,".git"), joinpath(repo_dir,".git"))
    end
    cd(repo_dir)
end
```

ã“ã®ã‚ˆã†ã«é–¢æ•°ã®æŒ™å‹•ã‚’å¤‰æ›´ã™ã‚‹ãŸã‚ã ã‘ã«ã€Documenter.jlã®ãƒªãƒã‚¸ãƒˆãƒªã‚’ã‚¯ãƒ­ãƒ¼ãƒ³ã—ã¦ç‹¬è‡ªæ‹¡å¼µã—ã¦â€¦ã¨ã‚„ã£ã¦ã„ãã®ã¯ä½™ã‚Šã«ã‚‚å¤§è¢ˆè£Ÿã§ã™ã€‚ç‹¬è‡ªæ‹¡å¼µã®ã‚³ãƒ¼ãƒ‰ã§overrideã™ã‚‹ã®ãŒä¸€ç•ªç°¡å˜ã§ã—ã‚‡ã†ã€‚ã“ã‚Œã‚’ã‚„ã‚‹ã ã‘ã®moduleãŒ[`HyrodiumHome.jl`](https://github.com/hyrodium/hyrodium.github.io/blob/master/src/HyrodiumHome.jl)ã§ã™ã€‚
å°†æ¥çš„ã«Documenter.jlã®ãƒãƒ¼ã‚¸ãƒ§ãƒ³ãŒå¤‰ã‚ã£ã¦ã€ã“ã®overrideãŒä½¿ãˆãªããªã‚‹å¯èƒ½æ€§ãŒã‚ã‚Šã¾ã™ãŒã€[Project.toml](https://github.com/hyrodium/hyrodium.github.io/blob/master/Project.toml)ã§`[compat]`ãŒæŒ‡å®šå¯èƒ½ãªã®ã§ç„¡å•é¡Œã§ã—ã‚‡ã†ã€‚

GitHub Actionsã§è‡ªå‹•ã§ãƒ“ãƒ«ãƒ‰â†’ãƒ‡ãƒ—ãƒ­ã‚¤ã‚‚å¯èƒ½ã§ã™ãŒã€æ–¹æ³•ã¯ä»–ã®ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã¨åŒæ§˜ãªã®ã§èª¬æ˜ã¯çœç•¥ã—ã‚ˆã†ã¨æ€ã„ã¾ã™ã€‚

# ã¾ã¨ã‚
å€‹äººã‚µã‚¤ãƒˆã«ã‚‚Documenter.jlãŒä½¿ãˆã¦ãƒãƒƒãƒ”ãƒ¼ï¼

# è¿½è¨˜â‘  (2021/07/12)
Documenter.jlã§ã¯ãƒãƒ¼ã‚¸ãƒ§ãƒ³ç®¡ç†å¿…é ˆã§`<github pages url>/dev`ã®ã‚ˆã†ãªãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã‚’æ˜ã£ã¦ã—ã¾ã†ã¨æœ¬æ–‡ã§èª¬æ˜ã—ã¦ã„ã¾ã—ãŸãŒã€æœ€æ–°ã®Documenter.jlã§ã¯ãƒãƒ¼ã‚¸ãƒ§ãƒ³ç®¡ç†ç„¡ã—ã«ã‚‚å¯¾å¿œã—ã¾ã—ãŸã€‚`deploydocs`ã™ã‚‹ã¨ãã«ã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰å¼•æ•°ã§ä»¥ä¸‹ã®ã‚ˆã†ã«`nothing`ã‚’æŒ‡å®šã™ã‚Œã°OKã§ã™ã€‚

```julia
deploydocs(;
    repo="github.com/hyrodium/HelloWorld.jl",
    versions=nothing
)
```

è©³ç´°ã¯ä»¥ä¸‹ã®PRã‚’ã”è¦§ãã ã•ã„ã€‚
https://github.com/JuliaDocs/Documenter.jl/issues/1615
https://github.com/JuliaDocs/Documenter.jl/pull/1616

# è¿½è¨˜â‘¡ (2021/07/12)
å€‹äººã‚µã‚¤ãƒˆã§ã¯ãƒãƒ¼ã‚¸ãƒ§ãƒ³ç®¡ç†ã¯ä¸è¦ã§ã™ãŒã€æ—¥æœ¬èª/è‹±èªã‚‚ã‚ã‚‹ã¨å¬‰ã—ã„ã§ã™ã­ã€‚
ãã†ã„ã†è¨³ã§è¿½åŠ ã—ã¾ã—ãŸã€‚

* æ—¥æœ¬èªï¼šhttps://hyrodium.github.io/ja/
* Englishï¼šhttps://hyrodium.github.io/en/

ã‚‚ã¨ã‚‚ã¨ã¯ãƒãƒ¼ã‚¸ãƒ§ãƒ³åˆ‡ã‚Šæ›¿ãˆã«é£ã‚ã‚Œã¦ã„ãŸå ´æ‰€ã§ã—ãŸãŒã€è¨€èªåˆ‡ã‚Šæ›¿ãˆã«ç½®ãæ›ãˆã‚‹ã®ã«ä¾¿åˆ©ã§ã—ãŸã€‚

![](https://storage.googleapis.com/zenn-user-upload/1ee8ab20624c4e2c0d580487.gif)

(å®Ÿã¯ https://hyrodium.github.io ã«ã¯ã¾ã å¤ã„ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ãŒæ®‹ã£ã¦ã„ã¾ã™ã€‚é©å½“ãªã‚¿ã‚¤ãƒŸãƒ³ã‚°ã§ãƒªãƒ€ã‚¤ãƒ¬ã‚¯ãƒˆã™ã‚‹ã‚ˆã†ã«ã—ãŸã„ã§ã™ãŒã€æ—¥æœ¬èªç‰ˆãƒ»è‹±èªç‰ˆã®ä½•ã‚Œã«ãƒªãƒ€ã‚¤ãƒ¬ã‚¯ãƒˆã™ã‚‹ã‹ã‚’æ±ºã‚ã‚‹ã®ãŒé¢å€’ã§â€¦ã™ã“ã—æ”¾ç½®ã—ã¾ã™)

# è¿½è¨˜â‘¢ (2021/07/23)
404ãƒšãƒ¼ã‚¸ã®è¿½åŠ ã‚‚ã‚„ã£ã¦ã€å¤ã„ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ã‚’æ•´ç†ã—ã¾ã—ãŸã€‚404ã¯æœ¬æ¥ã¯Documenter.jlã®æ¨™æº–æ©Ÿèƒ½ã«å…¥ã£ã¦ã„ã‚‹ã¹ãã§ã€[ã“ã¡ã‚‰ã®issue](https://github.com/JuliaDocs/Documenter.jl/issues/1411)ã«ã‚‚æŒ™ã’ã‚‰ã‚Œã¦ã„ã¾ã™ãŒã€å…¬å¼ã«ã¯å¯¾å¿œã—ã¦ã„ã¾ã›ã‚“ã€‚

ãªã®ã§ã¡ã‚‡ã£ã¨å¼·å¼•ã«å¯¾å¿œã•ã›ã¾ã—ãŸã€‚è©³ç´°ã¯ã“ã¡ã‚‰ã®ã‚³ãƒ¼ãƒ‰ã‚’ç¢ºèªãã ã•ã„â†“
https://github.com/hyrodium/hyrodium.github.io/blob/master/docs/make.jl
