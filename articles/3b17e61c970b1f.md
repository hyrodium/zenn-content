---
title: "新しくなったBasicBSpline.jl(v0.8.3)の紹介"
emoji: "💫"
type: "tech"
topics:
  - "julia"
  - "math"
published: false
---

# はじめに
一昨年に[BasicBSpline.jlを作ったので宣伝です！](https://zenn.dev/hyrodium/articles/5fb08f98d4a918)を書きました。
当時はBasicBSpline.jlの`v0.1.1`をリリースしたばかりでしたが、現在のBasicBSpline.jlの最新バージョンは`v0.8.3`です。
主な変更点は以下です。

* ノット列の型`KnotVector`がパラメトリック型になって`Float64`以外にも`Rational`や`BigFloat`に対応できるようになった
* NURBSに対応した
* Plots.jlに対応した
* 標準の`BSplineSpace`のみで高速かつ汎用になった
* 等間隔ノット列の型(`UniformKnotVector`)を用意して、一部の演算が高速化された
* 関数・型の名称変更 (e.g. `Knots`→`KnotVector`, `bsplineunity`→`domain`)

以前の記事は古くなってしまったので、本記事では新しくなったBasicBSpline.jlでのコード例や実装時に気をつけたことなどを書いていこうと思います。

# B-splineってなに？
区分多項式を便利に扱えるように、関数空間の基底を取りやすいように道具を整備したものがB-splineです。
これまでに、色々なB-splineの資料を作ってきました。

* [B-spline入門（線形代数がすこし分かる人向け）](https://www.youtube.com/watch?v=GOdY02PA_WI)
    * 音声付きで学びたい人はこちら。
    * 数理的なモチベーションが伝わりやすい…はず
* [NURBS多様体による形状表現](https://hyrodium.github.io/ja/pdf/#NURBS%E5%A4%9A%E6%A7%98%E4%BD%93%E3%81%AB%E3%82%88%E3%82%8B%E5%BD%A2%E7%8A%B6%E8%A1%A8%E7%8F%BE)
    * 証明を詳細にフォローしたい人はこちら。
    * PDF資料
* [BasicBSpline.jlのドキュメント](https://hyrodium.github.io/BasicBSpline.jl/stable/)
    * Juliaで実行しながらB-splineを勉強したい人はこちら。
    * 英語で書いてます。
* [BasicBSpline.jlを作ったので宣伝です！](https://zenn.dev/hyrodium/articles/5fb08f98d4a918)
    * 以前の記事でBasicBSpline.jlの説明としては古いですが、B-splineのモチベーションの説明としては悪くないと思います。

# BasicBSpline.jlのつかいかた
B-spline自体のモチベーションは既に上記資料で説明したので、以下ではコード例を紹介します。

## 形状表現
B-splineの応用として最も有用なものの一つが形状表現です。
[以前の記事](https://zenn.dev/hyrodium/articles/5fb08f98d4a918)でも説明した通り、B-spline多様体はBézier曲線を一般化したものです。
その形状は矩形領域からAffine空間への区分多項式の像として定義されます。

トーラスの例

## 内挿補間
区分多項式による補間にもB-splineを使うことができます。
B-spline

## 関数フィッティング
関数にフィッティングする

# BasicBSpline.jlの内部実装

B-spline自体の性質については前述の資料で十分説明したので、これ以上書くのは繰り返しになってしまいます。[^1]
以降の本記事では、BasicBSpline.jlの実装において、Juliaの言語機能がどのように便利だったかをお伝えします！
キーワードは以下です。

* Unicode文字による数学表記が便利！
* 型の昇格(type promotion)が便利！
* 生成関数(generated function)による一般の多項式次数への対応

[^1]: 「日本語で書かれたBasicBSpline.jlのドキュメントが無いじゃないか！」と思われる方はDeepLなどで翻訳しつつ[BasicBSpline.jlのドキュメント](https://hyrodium.github.io/BasicBSpline.jl/stable/)を読んでください…。

## ノット列の加法
複数のノット列を"足す"操作を

この操作は可換で、

`String`との対比

## B-spline空間(区分多項式空間)
型パラメータの話

## 包含関係
メソッドの追加の話



## 


# Q&A
## いつv1.0を出すんですか？

## 他のパッケージよりも優れてるんですか？
なにも分からない…。
