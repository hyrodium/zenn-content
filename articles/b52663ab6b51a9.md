---
title: "å€‹äººçš„ã«é¢é£Ÿã‚‰ã£ãŸJuliaè¨€èªå‹•ä½œé›†(ä»®)"
emoji: "ğŸ˜²"
type: "tech"
topics:
  - "julia"
published: false
---

# ã¯ã˜ã‚ã«
Juliaè¨€èªã‚’ã‚„ã£ã¦ã„ã¦ã€äºˆæƒ³ã¨é•ã£ãŸå‹•ä½œã«å‡ºä¼šã†ã“ã¨ãŒã‚ã‚Šã¾ã™ã€‚é›‘å¤šãªå†…å®¹ã«ãªã‚Šãã†ã§ã™ãŒã€æœ¬è¨˜äº‹ã§ã¯ç§ãŒé©šã‹ã•ã‚ŒãŸå®Ÿè¡Œçµæœãªã©ã‚’è¨˜è¼‰ã—ã¦ã„ãã¾ã™ã€‚
ä»–ã«ã‚‚é¢ç™½ã„ä¾‹ãŒã‚ã‚Œã°ã‚³ãƒ¡ãƒ³ãƒˆæ­“è¿ã§ã™ï¼

æœ¬è¨˜äº‹ã®å®Ÿè¡Œç’°å¢ƒã¯ä»¥ä¸‹ã§ã™ï¼š
```julia
julia> versioninfo()
Julia Version 1.7.3
Commit 742b9abb4d (2022-05-06 12:58 UTC)
Platform Info:
  OS: Linux (x86_64-pc-linux-gnu)
  CPU: AMD Ryzen 7 2700X Eight-Core Processor
  WORD_SIZE: 64
  LIBM: libopenlibm
  LLVM: libLLVM-12.0.1 (ORCJIT, znver1)
```

# é›‘å¤šãªä¾‹ãŸã¡

ä»¥ä¸‹ã®ä¾‹ã®å¤šãã¯ã€è¨€èªä»•æ§˜ä¸Šæ„å›³çš„ã«æ±ºã‚ã‚‰ã‚ŒãŸã‚‚ã®ã ã¨æ€ã„ã¾ã™ã€‚
ä¸€éƒ¨ã¯å°†æ¥çš„ã«Julia 2.0ã§ä¿®æ­£ã•ã‚Œã‚‹éƒ¨åˆ†ã‚‚ã‚ã‚‹ã‹ã‚‚çŸ¥ã‚Œã¾ã›ã‚“ãŒã€ã€Œã‚³ãƒ¼ãƒŠãƒ¼ã‚±ãƒ¼ã‚¹ã‚’é€šã˜ã¦è¨€èªä»•æ§˜ã®æ°—æŒã¡ã‚’ç†è§£ã™ã‚‹ã€ã“ã¨ãŒå‡ºæ¥ã‚Œã°å¬‰ã—ã„ã§ã™ã€‚

## ä¹—æ³•æ¼”ç®—å­ã®çœç•¥
Juliaã§ã¯ä¹—æ³•æ¼”ç®—å­`*`ã‚’çœç•¥ã§ãã‚‹ã“ã¨ãŒã‚ã‚Šã¾ã™ãŒã€æŒ‡æ•°è¡¨è¨˜ã®æ–¹ãŒå„ªå…ˆã•ã‚Œã¾ã™ã€‚

```julia
julia> e1, f1, g1 = 2,3,4
(2, 3, 4)

julia> 5e1
50.0

julia> 5f1
50.0f0

julia> 5g1
20
```

ã‚·ãƒ³ã‚¿ãƒƒã‚¯ã‚¹ãƒã‚¤ãƒ©ã‚¤ã‚¿ãŒå„ªç§€ãªã‚‰æ°—ã¥ã‘ã¾ã™ã­ã€‚ä¸‹è¨˜ã®ã‚ˆã†ã«ä¸‹ä»˜ãæ–‡å­—ã‚’ä½¿ã£ã¦å›é¿ã™ã‚‹ã“ã¨ã‚‚ã§ãã¾ã™ï¼š

```julia
julia> eâ‚, fâ‚, gâ‚ = 2,3,4
(2, 3, 4)

julia> 5eâ‚
10

julia> 5fâ‚
15

julia> 5gâ‚
20
```

## falseã§ã®æ›ã‘ç®—

Juliaã§ã¯Booleanå‹ã¯æ•´æ•°å‹ã®ä¸€ç¨®ã¨ã—ã¦æ‰±ã‚ã‚Œã€`true`/`false`ã¯ãã‚Œãã‚Œ`1`/`0`ã«å¯¾å¿œã—ã¾ã™ã€‚

```julia
julia> false isa Bool <: Integer <: Number
true

julia> Int[false, true]
2-element Vector{Int64}:
 0
 1
```

ã—ã‹ã—ã€`false`ã¯`0`ã¨ç•°ãªã‚‹æŒ™å‹•ã‚’ç¤ºã™ã“ã¨ãŒã‚ã‚Šã¾ã™ï¼š

```julia
julia> NaN * 0
NaN

julia> Inf * 0
NaN

julia> NaN * false
0.0

julia> Inf * false
0.0
```

ã“ã‚Œã¯[strong zeroã¨å‘¼ã°ã‚Œã‚‹ã‚‚ã®](https://docs.julialang.org/en/v1/manual/mathematical-operations/#Arithmetic-Operators)[^1]ã§ã€æ›ã‘ç®—ã®ç›¸æ‰‹ãŒ`NaN`ã¨ã‹`Inf`ã§ã‚ã£ã¦ã‚‚å¼·åˆ¶çš„ã«`0`ã‚’è¿”ã—ã¦ãã‚Œã¾ã™ã€‚ã¨ãã«ä¾¿åˆ©ã§ã™ãŒã€æ¼”ç®—ã®é †åºã«ã¯æ°—ã‚’ã¤ã‘ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ï¼š

```julia
julia> false * NaN * NaN
NaN

julia> NaN * false * NaN
NaN

julia> NaN * NaN * false
0.0
```

[^1]: force zeroã¨å‘¼ã¶æ–¹ãŒéŸ»ãŒè¸ã‚ã¦è¦šãˆã‚„ã™ã„ã¨æ€ã„ã¾ã™ãŒã€ãã®ã‚ˆã†ãªè¡¨è¨˜ã¯ã•ã‚Œãªã„ã‚ˆã†ã§ã™ã€‚è‹±èªãƒ ã‚ºã‚«ã‚·ã‚¤

## æ¨ç§»çš„ã§ãªã„ç­‰å·

`LinearAlgebra.I`ã¯å˜ä½è¡Œåˆ—ã‚’è¡¨ã™ã‚‚ã®ã§`I(3)`ã¯3Ã—3ã®å˜ä½è¡Œåˆ—ã‚’è¿”ã—ã¾ã™ã€‚
`I`ã¨`I(3)`ã¯ç­‰ã—ã„ã§ã™ãŒï¼Œ`I(3)`ã¨`I(4)`ã¯ç­‰ã—ãã‚ã‚Šã¾ã›ã‚“ã€‚

```julia
julia> using LinearAlgebra

julia> I(3)
3Ã—3 Diagonal{Bool, Vector{Bool}}:
 1  â‹…  â‹…
 â‹…  1  â‹…
 â‹…  â‹…  1

julia> I(3) == I == I(4)
true

julia> I(3) == I(4)
false
```

## æŒ‡æ•°æ¼”ç®—

çµ„ã¿è¾¼ã¿é–¢æ•°`^`ã¯ã‹ãªã‚Šç‰¹æ®Šã§ã™ã€‚`^(a,b)`ã¯å‹ä¸å®‰å®šãªã‚ˆã†ã«è¦‹ãˆã¾ã™ãŒã€ã“ã‚Œã¯parsingã®ã¨ãã«è§£æ¶ˆã•ã‚Œã¦ãŠã‚Šã€å®Ÿè¡Œæ™‚ã«ã¯å‹å®‰å®šã«ãªã£ã¦ã„ã¾ã™ã€‚

```julia
julia> ^(2,3)
8

julia> ^(2,-3)
0.125

julia> g = ^
^ (generic function with 69 methods)

julia> g(2,3)
8

julia> g(2,-3)
ERROR: DomainError with -3:
Cannot raise an integer x to a negative power -3.
Make x or -3 a float by adding a zero decimal (e.g., 2.0^-3 or 2^-3.0 instead of 2^-3), or write 1/x^3, float(x)^-3, x^float(-3) or (x//1)^-3
Stacktrace:
 [1] throw_domerr_powbysq(#unused#::Int64, p::Int64)
   @ Base ./intfuncs.jl:245
 [2] power_by_squaring(x_::Int64, p::Int64)
   @ Base ./intfuncs.jl:266
 [3] ^(x::Int64, p::Int64)
   @ Base ./intfuncs.jl:290
 [4] top-level scope
   @ REPL[5]:1
```

ã©ã®ã‚ˆã†ãªãƒ¡ã‚½ãƒƒãƒ‰ãŒå‘¼ã³å‡ºã•ã‚Œã¦ã„ã‚‹ã‹ã‚’èª¿ã¹ã‚‹ã«ã¯`@code_lowered`ãŒä¾¿åˆ©ã§ã™ã€‚

```julia
julia> f1(x) = 2^x
f1 (generic function with 1 method)

julia> f2(x) = x^2
f2 (generic function with 1 method)

julia> f1(3), f2(3)
(8, 9)

julia> @code_lowered f1(3)
CodeInfo(
1 â”€ %1 = 2 ^ x
â””â”€â”€      return %1
)

julia> @code_lowered f2(3)
CodeInfo(
1 â”€ %1 = Core.apply_type(Base.Val, 2)
â”‚   %2 = (%1)()
â”‚   %3 = Base.literal_pow(Main.:^, x, %2)
â””â”€â”€      return %3
)
```

`f1`ã§ã¯å‹å®‰å®šãª`^`ãŒå‘¼ã°ã‚Œã¦ãŠã‚Šã€`f2`ã§ã¯`Base.literal_pow`ãŒå‘¼ã°ã‚Œã¦ã„ã‚‹ã“ã¨ãŒç¢ºèªã§ãã¾ã™ã€‚

## NumberãŒiterable
Numberã¯0æ¬¡å…ƒé…åˆ—ã¨åŒæ§˜ã«iterableã§ã™ã€‚

```julia
julia> 3 == 3[1]
true

julia> 3[1][1]
3

julia> [i for i in 3]
0-dimensional Array{Int64, 0}:
3

julia> size(3)
()

julia> reshape([3])
0-dimensional Array{Int64, 0}:
3

julia> reshape([3]) == 3
false
```

ã“ã‚Œã®è­°è«–ã«ã¤ã„ã¦ã¯ã€ä¾‹ãˆã° https://github.com/JuliaLang/julia/issues/7903 ãªã©ã‚’è¦‹ã‚‹ã¨è‰¯ã„ãã†ã§ã™ã€‚

## NaNã®å‹

`NaN`ã¯ Not a Number ã®ç•¥ã§ã™ãŒã€`Number`ã§ã™ã€‚

```julia
julia> NaN isa Number  # Not a number
true
```

## ãƒ‘ã‚¹ã®çµåˆ

## ã‚¼ãƒ­
```julia
julia> zero(Real)
0

julia> zeros(3)
3-element Vector{Float64}:
 0.0
 0.0
 0.0
```

## è¡Œåˆ—ã¨ãƒ™ã‚¯ãƒˆãƒ«ã®ç©
ã€Œ`(è¡Œåˆ—)*(ç¸¦ãƒ™ã‚¯ãƒˆãƒ«)`ã¯`(ç¸¦ãƒ™ã‚¯ãƒˆãƒ«)`ã«ãªã‚‹ã¹ãã€ã€ã¤ã¾ã‚Šã€Œ`M isa AbstractMatrix`ã‹ã¤`v isa AbstractVector`ã®ã¨ãã€`M*v`ã¯`AbstractVector`ã«ãªã‚‹ã¹ãã€ã ã¨æ€ã„ã¾ã™ãŒã€ä¸€èˆ¬ã«ã¯æˆç«‹ã—ã¾ã›ã‚“ã€‚

```julia
julia> M = [1,2,3]'
1Ã—3 adjoint(::Vector{Int64}) with eltype Int64:
 1  2  3

julia> v = [1,2,3]
3-element Vector{Int64}:
 1
 2
 3

julia> M isa AbstractMatrix
true

julia> v isa AbstractVector
true

julia> M*v isa AbstractVector
false
```

è©³ã—ãã¯[Juliaã®è¡Œåˆ—ãƒ»ãƒ™ã‚¯ãƒˆãƒ«ã‚’å®Œå…¨ã«ç†è§£ã™ã£ãï¼ï¼](https://zenn.dev/hyrodium/articles/3fa3882e4bca04)ã‚’ã©ã†ã

## å¤§å°æ¯”è¼ƒ
ã€Œå°ãªã‚Šã€ã«ã¯3ç¨®é¡ã‚ã£ã¦ã€ãã‚Œãã‚ŒæŒ™å‹•ãŒç•°ãªã‚Šã¾ã™ã€‚

* `isless` : å³æ ¼ã«å¤§å°æ¯”è¼ƒ
* `<` : (æ•°å­¦çš„ã«)ç­‰ã—ã„ãªã‚‰å°ãªã‚Šã§ãªã„
* `â‰¤` : `<`ã«ç­‰å·ã‚‚å«ã‚ã¡ã‚ƒã†

```julia
julia> isless(-0.0, 0.0), -0.0 < 0.0, -0.0 â‰¤ 0.0
(true, false, true)

julia> isless(0.0, 0.0), 0.0 < 0.0, 0.0 â‰¤ 0.0
(false, false, true)
```

`isless`ã¯`sort`ã«ä¾¿åˆ©ã§ã™ï¼š

```julia
julia> sort([-1.0, 0.0, -0.0, 2.0])
4-element Vector{Float64}:
 -1.0
 -0.0
  0.0
  2.0

julia> sort([-1.0, 0.0, -0.0, 2.0], lt = <)
4-element Vector{Float64}:
 -1.0
  0.0
 -0.0
  2.0
```

ã—ã‹ã—ã€`searchsorted`é–¢æ•°(ç¬¬2å¼•æ•°ã¨ç­‰ã—ã„rangeã‚’è¿”ã™ã‚‚ã®)ã«å¯¾ã—ã¦ã¯æ³¨æ„ãŒå¿…è¦ã§ã™ã€‚

```julia
julia> searchsorted([-1.0, -0.0, 0.0, 2.0, 2.0, 3.0], 2)
4:5

julia> [-1.0, -0.0, 0.0, 2.0, 2.0, 3.0][ans]
2-element Vector{Float64}:
 2.0
 2.0

julia> searchsorted([-1.0, -0.0, 0.0, 2.0, 2.0, 3.0], 0)
3:3

julia> searchsorted([-1.0, -0.0, 0.0, 2.0, 2.0, 3.0], -0)
3:3

julia> searchsorted([-1.0, -0.0, 0.0, 2.0, 2.0, 3.0], 0.0)
3:3

julia> searchsorted([-1.0, -0.0, 0.0, 2.0, 2.0, 3.0], -0.0)
2:2
```

ã“ã‚Œã‚’å›é¿ã™ã‚‹ã«ã¯`lt = <`ã‚’æŒ‡å®šã™ã‚Œã°OKã§ã™ã€‚

```julia
julia> searchsorted([-1.0, -0.0, 0.0, 2.0, 2.0, 3.0], 0.0, lt = <)
2:3

julia> searchsorted([-1.0, -0.0, 0.0, 2.0, 2.0, 3.0], -0.0, lt = <)
2:3
```

## `Vararg`ã¯å‹ã§ã¯ãªã„


## Variantã¨Covariant

```julia
julia> (3,4) isa Tuple{Real,Real}
true

julia> [3,4] isa Vector{Real}
false

julia> [3,4] isa Vector{<:Real}
true

julia> (3,4) isa Tuple{<:Real,<:Real}
true
```
